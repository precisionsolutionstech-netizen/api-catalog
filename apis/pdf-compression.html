<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../favicon.png" type="image/png" sizes="32x32">
    <title>PDF Compression API | RapidAPI</title>
    <meta name="description" content="PDF compressor, optimizer, and shrinker API. Reduce PDF file size while preserving quality. Speed, lossless, or max compression modes. Multipart upload. Email attachments, web downloads, storage. Stateless, 80MB max.">
    <meta name="keywords" content="pdf-compression, API, RapidAPI, developer">
    <link rel="canonical" href="https://precisionsolutionstech-netizen.github.io/api-catalog/apis/pdf-compression.html">
    <meta property="og:url" content="https://precisionsolutionstech-netizen.github.io/api-catalog/apis/pdf-compression.html">
    <meta property="og:image" content="https://precisionsolutionstech-netizen.github.io/api-catalog/og-default.png">
    <meta property="og:type" content="article">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PDF Compression API">
    <meta name="twitter:description" content="Reduce PDF size. 80MB max.">
    <meta name="twitter:image" content="https://precisionsolutionstech-netizen.github.io/api-catalog/og-default.png">
    <meta property="og:title" content="PDF Compression API">
    <meta property="og:description" content="PDF compressor, optimizer, and shrinker API. Reduce PDF file size while preserving quality. Speed, lossless, or max compression modes. Multipart upload. Email attachments, web downloads, storage. Stateless, 80MB max.">
    <script type="application/ld+json">
{"@context":"https://schema.org","@type":"TechArticle","headline":"PDF Compression API","name":"PDF Compression API","description":"PDF compressor, optimizer, and shrinker API. Reduce PDF file size while preserving quality. Speed, lossless, or max compression modes. Multipart upload. Email attachments, web downloads, storage. Stateless, 80MB max.","author":{"@type":"Organization","name":"Precision Solutions Tech"},"url":"https://precisionsolutionstech-netizen.github.io/api-catalog/apis/pdf-compression.html"}
    </script>
    <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"API Catalog","item":"https://precisionsolutionstech-netizen.github.io/api-catalog/"},{"@type":"ListItem","position":2,"name":"PDF Compression","item":"https://precisionsolutionstech-netizen.github.io/api-catalog/apis/pdf-compression.html"}]}
    </script>
    <script type="application/ld+json">
{"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"Does it store files?","acceptedAnswer":{"@type":"Answer","text":"No. Fully stateless."}},{"@type":"Question","name":"Max file size?","acceptedAnswer":{"@type":"Answer","text":"80MB."}}]}
    </script>
    <style>
        :root { --bg: #0f172a; --surface: #1e293b; --border: #334155; --text: #e2e8f0; --muted: #94a3b8; --accent: #38bdf8; --success: #34d399; --error: #f87171; }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: ui-sans-serif, system-ui, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
        .wrap { max-width: 900px; margin: 0 auto; padding: 24px 20px; }
        a { color: var(--accent); }
        nav { margin-bottom: 32px; font-size: 0.9rem; }
        h1 { font-size: 1.9rem; margin: 0 0 12px; }
        .lead { font-size: 1.1rem; color: var(--muted); margin-bottom: 32px; }
        h2 { font-size: 1.35rem; margin: 32px 0 16px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
        section { margin-bottom: 28px; }
        .playground { background: var(--surface); border-radius: 12px; padding: 20px; margin: 24px 0; border: 1px solid var(--border); }
        .playground label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.9rem; }
        .playground input[type="password"], .playground select { width: 100%; max-width: 320px; padding: 10px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); margin-bottom: 12px; }
        .playground textarea { width: 100%; min-height: 120px; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-family: ui-monospace, monospace; font-size: 13px; resize: vertical; }
        .playground input[type="file"] { margin-bottom: 12px; }
        .playground button { padding: 10px 20px; background: var(--accent); color: var(--bg); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-top: 8px; }
        .playground button:disabled { opacity: 0.6; cursor: not-allowed; }
        .playground .result { margin-top: 16px; padding: 12px; border-radius: 8px; background: var(--bg); border: 1px solid var(--border); white-space: pre-wrap; word-break: break-all; font-family: ui-monospace, monospace; font-size: 12px; max-height: 320px; overflow: auto; }
        .playground .result.error { border-color: var(--error); color: var(--error); }
        .playground .result.success { border-color: var(--success); }
        .file-upload-note { font-size: 0.85rem; color: var(--muted); margin-top: 4px; }
        .code-wrap { position: relative; margin: 16px 0; }
        .code-wrap pre { margin: 0; padding: 14px 16px; background: var(--surface); border-radius: 8px; border: 1px solid var(--border); overflow-x: auto; font-size: 13px; }
        .code-wrap .copy-btn { position: absolute; top: 10px; right: 10px; padding: 6px 12px; background: var(--border); color: var(--text); border: none; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .code-wrap .copy-btn:hover { background: var(--accent); color: var(--bg); }
        .lang-tabs { display: flex; gap: 4px; margin-bottom: 8px; flex-wrap: wrap; }
        .lang-tabs button { padding: 8px 14px; background: var(--surface); border: 1px solid var(--border); color: var(--muted); border-radius: 6px; cursor: pointer; font-size: 0.9rem; }
        .lang-tabs button.active { background: var(--accent); color: var(--bg); border-color: var(--accent); }
        .code-block { display: none; }
        .code-block.active { display: block; }
        .schema-section { margin: 16px 0; }
        .schema-toggle { color: var(--accent); cursor: pointer; text-decoration: none; font-weight: 600; }
        .schema-toggle:hover { text-decoration: underline; }
        .schema-content { display: none; margin-top: 12px; padding: 12px; background: var(--surface); border-radius: 8px; border: 1px solid var(--border); overflow-x: auto; }
        .schema-content.show { display: block; }
        .schema-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .schema-table th, .schema-table td { padding: 8px 12px; text-align: left; border-bottom: 1px solid var(--border); }
        .schema-table code { font-size: 0.85em; }
        .long-desc { color: var(--muted); font-size: 0.98rem; }
        .long-desc p { margin: 0.75em 0; }
        .long-desc ul { margin: 0.75em 0; padding-left: 1.5em; }
        .long-desc li { margin: 0.35em 0; }
        .postman-btn { display: inline-block; margin-top: 12px; padding: 10px 18px; background: var(--surface); border: 1px solid var(--border); color: var(--accent); border-radius: 8px; cursor: pointer; font-weight: 600; text-decoration: none; }
        .postman-btn:hover { background: var(--border); }
        
        .cta-primary { display: inline-block; margin: 0 0 24px; padding: 12px 24px; background: var(--accent); color: var(--bg); border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; text-decoration: none; cursor: pointer; }
        .cta-primary:hover { filter: brightness(1.1); }
        .global-nav { margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .global-nav a { margin-right: 16px; }
        .faq-list { list-style: none; padding: 0; margin: 0; }
        .faq-list li { border-bottom: 1px solid var(--border); }
        .faq-q { width: 100%; padding: 14px 12px; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center; text-align: left; background: transparent; color: var(--text); border: none; font-family: inherit; font-size: inherit; }
        .faq-q:hover { background: var(--surface); }
        .faq-q::after { content: '+'; flex-shrink: 0; margin-left: 8px; width: 1.5rem; height: 1.5rem; display: inline-flex; align-items: center; justify-content: center; border-radius: 4px; background: var(--surface); color: var(--accent); font-size: 1.1rem; line-height: 1; }
        .faq-q[aria-expanded="true"]::after { content: '2'; }
        .faq-a { padding: 12px 12px 16px; color: var(--muted); display: none; background: var(--surface); margin: 0 12px 8px; border-radius: 6px; font-weight: normal; }
        .faq-a.show { display: block; }
        .related-apis { list-style: none; padding: 0; margin: 0; }
        .related-apis li { margin: 10px 0; padding-left: 0; }
        .related-apis a { font-weight: 500; }
        .browse-all { margin: 28px 0; padding: 16px; background: var(--surface); border-radius: 8px; border: 1px solid var(--border); text-align: center; }
        .browse-all a { font-weight: 600; font-size: 1.05rem; }
        footer { margin-top: 48px; padding-top: 24px; border-top: 1px solid var(--border); color: var(--muted); font-size: 0.9rem; text-align: center; }
    </style>
</head>
<body>
    <div class="wrap">
        <nav class="global-nav" aria-label="Main"><a href="../index.html">Home</a><a href="../faq.html">FAQ</a><a href="../index.html#normalization">Normalization APIs</a><a href="../index.html#validation">Validation APIs</a><a href="../index.html#comparison">Comparison APIs</a><a href="../blog/what-is-data-normalization.html">Blog</a></nav>
        <nav aria-label="Breadcrumb"><a href="../index.html">API Catalog</a> → PDF Compression</nav>
        <article>
            <header>
                <h1>PDF Compression API</h1>
                <p class="lead">PDF compressor, optimizer, and shrinker API. Reduce PDF file size while preserving quality. Speed, lossless, or max compression modes. Multipart upload. Email attachments, web downloads, storage. Stateless, 80MB max.</p>
            </header>
            <section><h2 id="why">Why use this API?</h2><p>Shrink PDFs for storage or transfer without losing quality.</p></section>
            <section><h2 id="what">What the API does</h2><p>POST a PDF file to <code>/optimize</code>. Returns the optimized PDF file by default (binary). Send <code>Accept: application/json</code> to get size metadata only (originalSize, optimizedSize, reductionBytes, reductionPercent).</p></section>
            <section>
                <h2 id="schemas">Request &amp; response schema</h2>
                <p><a href="#request-schema" class="schema-toggle" id="toggle-req" aria-expanded="false">View request schema</a> &middot; <a href="#response-schema" class="schema-toggle" id="toggle-res" aria-expanded="false">View response schema</a></p>
                
                <div id="request-schema" class="schema-content" aria-hidden="true"><table class="schema-table"><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>file</code></td><td><code>file</code></td><td>PDF file to optimize (multipart form field).</td></tr><tr><td><code>mode</code></td><td><code>query</code></td><td>Optional: <code>speed</code>, <code>lossless</code> (default), or <code>maxCompression</code>.</td></tr></tbody></table></div>
                <div id="response-schema" class="schema-content" aria-hidden="true"><table class="schema-table"><thead><tr><th>Response</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Default</td><td><code>application/pdf</code></td><td>Optimized PDF binary. Headers: <code>X-Original-Size</code>, <code>X-Optimized-Size</code>, <code>X-Reduction-Bytes</code>, <code>X-Reduction-Percent</code>.</td></tr><tr><td>If <code>Accept: application/json</code></td><td><code>JSON</code></td><td><code>originalSize</code>, <code>optimizedSize</code>, <code>reductionBytes</code>, <code>reductionPercent</code>.</td></tr></tbody></table></div>
            </section>
            <section>
                <h2 id="playground">Try it in the playground</h2>
                <p>Add your <a href="https://rapidapi.com/precisionsolutionstech/api/pdf-compression-api1" target="_blank" rel="noopener">RapidAPI key</a> and run. Key is sent only to RapidAPI.</p>
                <div class="playground">
                    <label for="api-key">RapidAPI Key (required)</label>
                    <input type="password" id="api-key" placeholder="Your RapidAPI key" autocomplete="off">
                    <p class="file-upload-note" style="margin-bottom:8px;">Optional parameters (sent as query string):</p>
                    <label for="param-mode">Mode</label>
                    <select id="param-mode">
                        <option value="lossless" selected>lossless (default)</option>
                        <option value="speed">speed</option>
                        <option value="maxCompression">maxCompression</option>
                    </select>
                    <label id="label-allow-image" style="display:none;"><input type="checkbox" id="param-allow-image"> Allow image compression (lossless only)</label>
                    <label id="label-compression-level" for="param-compression-level" style="display:none;">Compression level (maxCompression only)</label>
                    <select id="param-compression-level" style="display:none;">
                        <option value="screen">screen</option>
                        <option value="ebook">ebook</option>
                        <option value="printer">printer</option>
                        <option value="prepress">prepress</option>
                    </select>
                    <label for="param-image-quality">Image quality (0–100, optional)</label>
                    <input type="number" id="param-image-quality" min="0" max="100" placeholder="90" style="width:80px;">
                    <label><input type="checkbox" id="metadata-only" value="1"> Get metadata only (JSON) — send <code>Accept: application/json</code></label>
                    <label for="file-input" style="margin-top:12px;display:block;">PDF file (required)</label>
                    <input type="file" id="file-input" accept=".pdf,application/pdf">
                    <p class="file-upload-note">File is sent to RapidAPI; not stored here.</p>
                    <button type="button" id="run-btn">Run request</button>
                    <div id="play-result" class="result" style="display:none;" aria-live="polite"></div>
                </div>
            </section>
            <section>
                <h2 id="code">Copy code</h2>
                <p>Host: <code>pdf-compression-api1.p.rapidapi.com</code>, endpoint: <code>POST /optimize</code>. Returns PDF by default; send <code>Accept: application/json</code> for metadata only. Choose language:</p>
                <div class="lang-tabs" role="tablist">
                    <button type="button" role="tab" aria-selected="true" data-lang="curl" class="active">cURL</button>
                    <button type="button" role="tab" aria-selected="false" data-lang="javascript">JavaScript</button>
                    <button type="button" role="tab" aria-selected="false" data-lang="python">Python</button>
                    <button type="button" role="tab" aria-selected="false" data-lang="java">Java</button>
                </div>
                <div id="snippet-curl" class="code-block active"><div class="code-wrap"><button type="button" class="copy-btn" data-copy="snippet-curl">Copy</button><pre><code>curl --request POST \
  --url 'https://pdf-compression-api1.p.rapidapi.com/optimize' \
  --header 'X-RapidAPI-Host: pdf-compression-api1.p.rapidapi.com' \
  --header 'X-RapidAPI-Key: YOUR_RAPIDAPI_KEY' \
  --form 'file=@document.pdf' \
  --output optimized.pdf</code></pre></div></div>
                <div id="snippet-javascript" class="code-block"><div class="code-wrap"><button type="button" class="copy-btn" data-copy="snippet-javascript">Copy</button><pre><code>const formData = new FormData();
formData.append('file', document.querySelector('input[type=file]').files[0]);
const res = await fetch('https://pdf-compression-api1.p.rapidapi.com/optimize', {
  method: 'POST',
  headers: { 'X-RapidAPI-Key': 'YOUR_RAPIDAPI_KEY', 'X-RapidAPI-Host': 'pdf-compression-api1.p.rapidapi.com' },
  body: formData
});
const blob = await res.blob();
// Default: blob is the PDF. For metadata only, send Accept: application/json and use res.json()</code></pre></div></div>
                <div id="snippet-python" class="code-block"><div class="code-wrap"><button type="button" class="copy-btn" data-copy="snippet-python">Copy</button><pre><code>import requests

url = &quot;https://pdf-compression-api1.p.rapidapi.com/optimize&quot;
headers = {'X-RapidAPI-Key': 'YOUR_RAPIDAPI_KEY', 'X-RapidAPI-Host': 'pdf-compression-api1.p.rapidapi.com'}
with open('document.pdf', 'rb') as f:
    r = requests.post(url, files={'file': f}, headers=headers)
with open('optimized.pdf', 'wb') as out:
    out.write(r.content)</code></pre></div></div>
                <div id="snippet-java" class="code-block"><div class="code-wrap"><button type="button" class="copy-btn" data-copy="snippet-java">Copy</button><pre><code>// POST to /optimize with multipart file part named 'file'. Response is PDF binary; write to file. See RapidAPI docs for full example.</code></pre></div></div>
                <p><button type="button" class="postman-btn" id="postman-download">Download Postman collection</button></p>
            </section>
            <section><h2 id="expect">What to expect</h2><p>By default the API returns the optimized PDF (binary). Send <code>Accept: application/json</code> to receive JSON with <code>originalSize</code>, <code>optimizedSize</code>, <code>reductionBytes</code>, <code>reductionPercent</code> only. Use your RapidAPI key in headers. Stateless; no data stored. See <a href="https://rapidapi.com/precisionsolutionstech/api/pdf-compression-api1" target="_blank" rel="noopener">RapidAPI docs</a> for full details.</p></section>
            <section><h2 id="about">About this API</h2>

                <h3 id="who-should-use">Who Should Use This API</h3>
                <p>Developers and apps optimizing PDFs for email, storage, or web.</p>
                <h3 id="also-known-as">Also Known As</h3>
                <p>PDF compressor API, PDF shrinker, PDF optimizer.</p>
<div class="long-desc">
<p>PDF Lossless Optimizer API</p>
<p>Make your PDF files smaller while preserving quality. This API offers three optimization modes: fast processing with minimal compression, balanced lossless compression (default), or maximum compression for smallest file sizes.</p>
<p>What This API Does</p>
<p>Upload a PDF file, and we optimize:</p>
<ul>
<li>PDF structure and organization</li>
<li>Content streams and compression</li>
<li>Font and resource storage</li>
<li>Image optimization (only in maxCompression mode or when allowImageCompression=true in lossless)</li>
</ul>
<p>**Modes:**</p>
<ul>
<li>**`speed`** — Little compression, fastest processing</li>
<li>**`lossless`** (default) — Moderate compression, perfect quality preservation</li>
<li>**`maxCompression`** — Maximum compression, some quality loss (not for legal/medical documents)</li>
</ul>
<p>Key Features</p>
<ul>
<li>**Three Modes** — `speed`, `lossless`, `maxCompression`</li>
<li>**100% Lossless Option** — Use `mode=lossless` for complete quality preservation</li>
<li>**Optional Image Compression** — In lossless mode: `allowImageCompression=true`, `imageQuality` (0–100)</li>
<li>**maxCompression Controls** — `compressionLevel` (screen, ebook, printer, prepress), `imageQuality`</li>
<li>**Metadata-Only Response** — Send `Accept: application/json` to get size stats without downloading the PDF</li>
<li>**Stateless** — No data stored; max file size 80MB, 60s timeout</li>
</ul>
<p>Use Cases</p>
<ul>
<li>**Email Attachments** — Reduce PDF size for easier delivery</li>
<li>**Website Downloads** — Smaller files for faster downloads</li>
<li>**Document Storage** — Save space when archiving PDFs</li>
<li>**API Integration** — Optimize PDFs in automated workflows</li>
</ul>

</div></section>
            <section><h2 id="faq">Frequently Asked Questions</h2>
                <ul class="faq-list">
                    <li>
                        <button type="button" class="faq-q" aria-expanded="false" aria-controls="faq-a1" id="faq-q1">Does it store files?</button>
                        <div id="faq-a1" class="faq-a" role="region" aria-labelledby="faq-q1">No. Fully stateless.</div>
                    </li><li>
                        <button type="button" class="faq-q" aria-expanded="false" aria-controls="faq-a2" id="faq-q2">Max file size?</button>
                        <div id="faq-a2" class="faq-a" role="region" aria-labelledby="faq-q2">80MB.</div>
                    </li>
                </ul>
            </section>
            <div class="browse-all"><a href="../index.html">Browse all APIs in the catalog →</a></div>
        </article>
        <footer>
            <p><a href="https://rapidapi.com/precisionsolutionstech/api/pdf-compression-api1" target="_blank" rel="noopener">Subscribe on RapidAPI</a> · <a href="../index.html">API Catalog</a></p>
            <p>© 2026 Precision Solutions Tech</p>
        </footer>
    </div>
    <script>
(function(){
    var host='pdf-compression-api1.p.rapidapi.com',path='/optimize',body="{}",fileUpload=true,rapidUrl="https://rapidapi.com/precisionsolutionstech/api/pdf-compression-api1";
    document.querySelectorAll('[data-rapid-docs]').forEach(function(a){ a.href = rapidUrl; });
    document.getElementById('toggle-req').addEventListener('click',function(e){ e.preventDefault(); var d=document.getElementById('request-schema'); d.classList.toggle('show'); this.setAttribute('aria-expanded',d.classList.contains('show')); });
    document.getElementById('toggle-res').addEventListener('click',function(e){ e.preventDefault(); var d=document.getElementById('response-schema'); d.classList.toggle('show'); this.setAttribute('aria-expanded',d.classList.contains('show')); });
    var toggleErrors=document.getElementById('toggle-errors');if(toggleErrors){ toggleErrors.addEventListener('click',function(e){ e.preventDefault(); var d=document.getElementById('error-codes'); d.classList.toggle('show'); this.setAttribute('aria-expanded',d.classList.contains('show')); }); }
    document.querySelectorAll('.lang-tabs button').forEach(function(btn){
        btn.addEventListener('click',function(){
            document.querySelectorAll('.lang-tabs button').forEach(function(b){ b.classList.remove('active'); b.setAttribute('aria-selected','false'); });
            document.querySelectorAll('.code-block').forEach(function(b){ b.classList.remove('active'); });
            this.classList.add('active'); this.setAttribute('aria-selected','true');
            var el=document.getElementById('snippet-'+this.getAttribute('data-lang')); if(el) el.classList.add('active');
        });
    });
    document.querySelectorAll('.copy-btn').forEach(function(btn){
        btn.addEventListener('click',function(){
            var id=this.getAttribute('data-copy'),block=document.getElementById(id),pre=block?block.querySelector('pre code'):null,btn=this;
            if(pre) navigator.clipboard.writeText(pre.textContent).then(function(){ var t=btn.textContent; btn.textContent='Copied!'; setTimeout(function(){ btn.textContent=t; },1500); });
        });
    });
    
    document.querySelectorAll('.faq-q').forEach(function(btn){
        btn.addEventListener('click',function(){ var expanded=this.getAttribute('aria-expanded')==='true'; this.setAttribute('aria-expanded',!expanded); var panel=document.getElementById(this.getAttribute('aria-controls')); if(panel) panel.classList.toggle('show',!expanded); });
    });
    var modeEl=document.getElementById('param-mode'), allowImgEl=document.getElementById('param-allow-image'), allowImgLabel=document.getElementById('label-allow-image'), compLevelEl=document.getElementById('param-compression-level'), compLevelLabel=document.getElementById('label-compression-level');
    function updateParamVisibility(){ var m=modeEl.value; allowImgLabel.style.display=m==='lossless'?'block':'none'; compLevelLabel.style.display=compLevelEl.style.display=m==='maxCompression'?'block':'none'; }
    if(modeEl){ modeEl.addEventListener('change',updateParamVisibility); updateParamVisibility(); }
    document.getElementById('postman-download').addEventListener('click',function(){
        var coll = { info: { name: "PDF Compression API", schema: 'https://schema.getpostman.com/json/collection/v2.1.0/collection.json' }, item: [{ name: 'Request', request: { method: 'POST', header: [{ key: 'Content-Type', value: 'application/json' }, { key: 'x-rapidapi-key', value: 'YOUR_RAPIDAPI_KEY' }, { key: 'x-rapidapi-host', value: host }], url: 'https://'+host+path } } ] };
        if(!fileUpload){ coll.item[0].request.body = { mode: 'raw', raw: typeof body==='string'?body:JSON.stringify(body) }; }
        else { coll.item[0].request.header = [{ key: 'X-RapidAPI-Key', value: 'YOUR_RAPIDAPI_KEY' }, { key: 'X-RapidAPI-Host', value: host }]; coll.item[0].request.url = 'https://'+host+path; coll.item[0].request.body = { mode: 'formdata', formdata: [{ key: 'file', type: 'file', src: '' }] }; }
        var blob = new Blob([JSON.stringify(coll,null,2)], { type: 'application/json' });
        var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'pdf-compression-postman-collection.json'; a.click(); URL.revokeObjectURL(a.href);
    });
    var runBtn=document.getElementById('run-btn'),keyInput=document.getElementById('api-key'),resultDiv=document.getElementById('play-result');
    runBtn.addEventListener('click',function(){
        var key=(keyInput.value||'').trim();
        if(!key){ resultDiv.style.display='block'; resultDiv.className='result error'; resultDiv.textContent='Please enter your RapidAPI key.'; return; }
        
    var fileInput=document.getElementById('file-input');
    if(!fileInput.files||!fileInput.files[0]){resultDiv.style.display='block';resultDiv.className='result error';resultDiv.textContent='Please select a PDF file.';return;}
    runBtn.disabled=true;resultDiv.style.display='block';resultDiv.className='result';resultDiv.textContent='Uploading…';
    var formData=new FormData();formData.append('file',fileInput.files[0]);
    var metadataOnly=document.getElementById('metadata-only')&&document.getElementById('metadata-only').checked;
    var params=[];
    var m=document.getElementById('param-mode'); if(m&&m.value) params.push('mode='+encodeURIComponent(m.value));
    if(m&&m.value==='lossless'){ var ai=document.getElementById('param-allow-image'); if(ai&&ai.checked) params.push('allowImageCompression=true'); }
    if(m&&m.value==='maxCompression'){ var cl=document.getElementById('param-compression-level'); if(cl&&cl.value) params.push('compressionLevel='+encodeURIComponent(cl.value)); }
    var iq=document.getElementById('param-image-quality'); if(iq&&iq.value!==''){ var v=parseInt(iq.value,10); if(!isNaN(v)&&v>=0&&v<=100) params.push('imageQuality='+v); }
    var url='https://'+host+path; if(params.length) url+='?'+params.join('&');
    var headers={'X-RapidAPI-Key':key,'X-RapidAPI-Host':host};
    if(metadataOnly) headers['Accept']='application/json';
    fetch(url,{method:'POST',headers:headers,body:formData})
    .then(function(r){
      var ct=r.headers.get('Content-Type')||'';
      if(metadataOnly||ct.indexOf('application/json')>=0){ return r.json().then(function(j){ return { json: true, data: j }; }); }
      return r.blob().then(function(b){ return { json: false, blob: b, size: b.size }; });
    })
    .then(function(o){
      resultDiv.className='result success';
      if(o.json){ resultDiv.textContent=JSON.stringify(o.data,null,2); }
      else{
        resultDiv.textContent='';
        resultDiv.appendChild(document.createTextNode('PDF received ('+o.size+' bytes). '));
        var a=document.createElement('a'); a.href=URL.createObjectURL(o.blob); a.download='optimized.pdf'; a.textContent='Download optimized.pdf';
        resultDiv.appendChild(a);
      }
    })
    .catch(function(e){resultDiv.className='result error';resultDiv.textContent='Request failed: '+e.message;})
    .finally(function(){runBtn.disabled=false;});
    });
})();
    </script>
</body>
</html>